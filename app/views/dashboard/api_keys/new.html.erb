<div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md mx-auto">

    <!-- Back Link -->
    <div class="mb-6">
      <%= link_to dashboard_path, 
          class: "inline-flex items-center text-sm text-gray-500 hover:text-gray-700" do %>
        <svg class="-ml-1 mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="19 12H5m0 0l7 7m-7-7l7-7" />
        </svg>
        Back to Dashboard
      <% end %>
    </div>

    <!-- Header -->
    <div class="text-center mb-8">
      <h2 class="text-3xl font-extrabold text-gray-900">
        Create New API Key
      </h2>
      <p class="mt-2 text-sm text-gray-600">
        Generate a new API key to access the Phish Directory API
      </p>
    </div>

    <!-- Form -->
    <div class="bg-white py-8 px-6 shadow rounded-lg sm:px-10">
      <%= form_with model: [@api_key], url: dashboard_api_keys_path, local: true do |form| %>
        
        <!-- Display Errors -->
        <% if @api_key.errors.any? %>
          <div class="mb-6 bg-red-50 border border-red-200 rounded-md p-4">
            <div class="flex">
              <div class="flex-shrink-0">
                <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                </svg>
              </div>
              <div class="ml-3">
                <h3 class="text-sm font-medium text-red-800">
                  There <%= @api_key.errors.count == 1 ? 'was' : 'were' %> <%= pluralize(@api_key.errors.count, 'error') %>:
                </h3>
                <div class="mt-2 text-sm text-red-700">
                  <ul class="list-disc space-y-1 pl-5">
                    <% @api_key.errors.full_messages.each do |error| %>
                      <li><%= error %></li>
                    <% end %>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        <% end %>

        <!-- API Key Name -->
        <div class="mb-6">
          <%= form.label :name, "API Key Name", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_field :name, 
              class: "appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",
              placeholder: "e.g., Production Server, Development Environment" %>
          <p class="mt-2 text-sm text-gray-500">
            Choose a descriptive name to help you identify this key later
          </p>
        </div>

        <!-- Expiration -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Expiration
          </label>
          <select name="expires_in_days" 
                  class="block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            <option value="">Never expires</option>
            <option value="30">30 days</option>
            <option value="90">90 days</option>
            <option value="180">6 months</option>
            <option value="365">1 year</option>
          </select>
          <p class="mt-2 text-sm text-gray-500">
            For security, we recommend setting an expiration date
          </p>
        </div>

        <!-- Important Security Notice -->
        <div class="mb-6 bg-yellow-50 border border-yellow-200 rounded-md p-4">
          <div class="flex">
            <div class="flex-shrink-0">
              <svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
            </div>
            <div class="ml-3">
              <h3 class="text-sm font-medium text-yellow-800">
                Important Security Information
              </h3>
              <div class="mt-2 text-sm text-yellow-700">
                <ul class="list-disc space-y-1 pl-5">
                  <li>Your API key will only be displayed <strong>once</strong> after creation</li>
                  <li>Store it securely and never share it publicly</li>
                  <li>If compromised, delete the key immediately and create a new one</li>
                  <li>Use environment variables to store API keys in your applications</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div>
          <%= form.submit "Create API Key", 
              class: "group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
        </div>

      <% end %>
    </div>

    <!-- Help Text -->
    <div class="mt-6 text-center">
      <p class="text-sm text-gray-500">
        Need help getting started? Check out our 
        <a href="https://api.phish.directory/docs" class="text-blue-600 hover:text-blue-500" target="_blank">
          API documentation
        </a>
      </p>
    </div>

  </div>
</div>