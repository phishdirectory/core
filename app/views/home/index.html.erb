<!-- Public homepage with Next.js-style components -->
<%= render 'shared/hero' %>
<%= render 'shared/primary_features' %>
<%= render 'shared/call_to_action' %>

<!-- User status overlay for authenticated users with admin access -->
<% if current_user && Flipper.enabled?(:ui, current_user) %>
  <div class="fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-sm border-2 border-blue-200">
    <div class="flex items-center space-x-3">
      <img src="<%= current_user.public_avatar_url(variant: :medium) %>"
           alt="<%= current_user.full_name %>'s avatar"
           class="w-10 h-10 rounded-full object-cover border-2 border-gray-200">
      <div class="flex-1">
        <p class="font-medium text-gray-900 text-sm"><%= current_user.full_name %></p>
        <p class="text-xs text-gray-500">Admin Access</p>
      </div>
    </div>
    
    <div class="mt-3 space-y-2">
      <% if current_user.admin? %>
        <%= link_to "Admin Dashboard", "/admin/dashboard",
                    class: "block w-full bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded text-sm text-center transition-colors" %>
      <% end %>

      <%= link_to "Dashboard", "/dashboard",
                  class: "block w-full bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded text-sm text-center transition-colors" %>

      <%= link_to "Edit Profile", edit_profile_path,
                  class: "block w-full bg-gray-500 hover:bg-gray-600 text-white px-3 py-1.5 rounded text-sm text-center transition-colors" %>

      <% if impersonating? %>
        <%= button_to "Stop Impersonating", stop_impersonating_admin_users_path,
                      method: :delete,
                      class: "w-full bg-orange-600 hover:bg-orange-700 text-white px-3 py-1.5 rounded text-sm transition-colors border-0 cursor-pointer" %>
      <% else %>
        <%= button_to "Sign Out", logout_path,
                      method: :delete,
                      class: "w-full bg-gray-600 hover:bg-gray-700 text-white px-3 py-1.5 rounded text-sm transition-colors border-0 cursor-pointer" %>
      <% end %>
    </div>
  </div>
<% elsif current_user %>
  <!-- Regular authenticated user overlay -->
  <div class="fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-sm">
    <div class="flex items-center space-x-3">
      <img src="<%= current_user.public_avatar_url(variant: :medium) %>"
           alt="<%= current_user.full_name %>'s avatar"
           class="w-10 h-10 rounded-full object-cover border-2 border-gray-200">
      <div class="flex-1">
        <p class="font-medium text-gray-900 text-sm"><%= current_user.full_name %></p>
        <p class="text-xs text-gray-500">Signed In</p>
      </div>
    </div>
    
    <div class="mt-3">
      <%= button_to "Sign Out", logout_path,
                    method: :delete,
                    class: "w-full bg-gray-600 hover:bg-gray-700 text-white px-3 py-1.5 rounded text-sm transition-colors border-0 cursor-pointer" %>
    </div>
  </div>
<% else %>
  <!-- Login prompt for anonymous users -->
  <div class="fixed bottom-4 right-4">
    <%= button_to "Login", login_path,
                  method: :get,
                  class: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md shadow-lg text-sm font-medium transition-colors border-0 cursor-pointer" %>
  </div>
<% end %>
